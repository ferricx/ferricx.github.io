<div
  class="popover-root"
  (focusout)="handleRootFocusOut($event)"
>
  <button
    class="popover-trigger"
    type="button"
    [attr.popovertarget]="popoverId"
    [attr.aria-describedby]="popoverId"
    popovertargetaction="toggle"
    (click)="markOpenedByClick()"
    (mouseenter)="openByHover()"
    (mouseleave)="handleHoverLeave($event)"
    (focusin)="openByFocus()"
    [attr.style]="'anchor-name: --' + popoverId + '-anchor'"
  >
    <ng-content></ng-content>
  </button>

  <div
    #popoverPanel
    [id]="popoverId"
    class="popover"
    [class.position-right]="positionClass === 'position-right'"
    [class.position-left]="positionClass === 'position-left'"
    [class.position-above]="positionClass === 'position-above'"
    [class.position-center-above]="positionClass === 'position-center-above'"
    [class.position-below]="positionClass === 'position-below'"
    [class.position-center-below]="positionClass === 'position-center-below'"
    popover="auto"
    (toggle)="handlePopoverToggle()"
    (mouseenter)="handleHoverEnter()"
    (mouseleave)="handleHoverLeave($event)"
    [attr.style]="'position-anchor: --' + popoverId + '-anchor'"
  >
    <div class="popover-content">
      <div class="popover-body">
        {{ text }}
        @if (linkHref) {
          <a [href]="linkHref">{{ linkLabel }}</a>
        }
      </div>
    </div>
  </div>
</div>
